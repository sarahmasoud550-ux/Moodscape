<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UAE Moodscape — Gentle Support</title>

  <!-- Modern font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    /* ========= THEME ========= */
    :root{
      /* Light, calming palette */
      --bg: #f6fbff;
      --bg-accent: #e8f7f3;
      --surface: #ffffff;
      --text: #0f172a;    /* slate-900 */
      --muted: #5b718a;   /* slate-500 */
      --primary: #2bb6c6; /* teal/cyan */
      --primary-2:#7cd4d7;
      --ring: rgba(43,182,198,.35);
      --border: rgba(15,23,42,.08);
      --radius: 16px;
      --shadow: 0 10px 35px rgba(15,23,42,.08);
      --shadow-2: 0 8px 24px rgba(15,23,42,.07);
      --maxw: 980px;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg: #0c1216;
        --bg-accent: #0f191b;
        --surface:#0f171b;
        --text: #e9f2f7;
        --muted:#9db0bf;
        --primary:#38c7d1;
        --primary-2:#5bdadd;
        --ring: rgba(91,218,221,.35);
        --border: rgba(255,255,255,.08);
        --shadow: 0 10px 35px rgba(0,0,0,.45);
        --shadow-2: 0 8px 24px rgba(0,0,0,.35);
      }
    }

    /* ========= BASE ========= */
    *{box-sizing:border-box}
    html,body{height:100%}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font:16px/1.6 "Inter", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 600px at 15% -10%, var(--bg-accent), transparent 60%),
        radial-gradient(900px 600px at 115% 110%, var(--bg-accent), transparent 60%),
        var(--bg);
    }
    a{color:var(--primary); text-decoration: none}
    a:hover{text-decoration: underline}
    .wrap{max-width:var(--maxw);margin:0 auto;padding:32px 20px}

    header{display:grid;justify-items:center;gap:6px;margin:6px 0 20px}
    .brand{font-weight:800;font-size:28px;letter-spacing:.2px;text-align:center}
    .sub{color:var(--muted);font-size:14px;text-align:center}

    /* ========= CARDS & LAYOUT ========= */
    .stack{display:grid;gap:18px;justify-items:center}
    .card{
      width:min(760px,100%);
      background:var(--surface);
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:22px;
      animation: fadeIn .35s ease both;
      margin: 18px;
    }
    .card h1,.card h2{margin:.2rem 0 .6rem;text-align:center}
    .help,.footnote{color:var(--muted);text-align:center}

    .notice{
      width:min(760px,100%);
      background: linear-gradient(180deg, rgba(43,182,198,.10), rgba(124,212,215,.10));
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow-2);
      padding:18px;
      display:grid;gap:12px;justify-items:center;
      text-align:center;
      margin: 18px;
    }
    .phones{
      display:grid;gap:10px;width:100%;
      grid-template-columns: 1fr;
    }
    @media (min-width:720px){ .phones{grid-template-columns:repeat(3,1fr)} }
    .pill{
      background:rgba(255,255,255,.55);
      border:1px solid var(--border);
      border-radius:999px;
      padding:10px 14px;
      display:grid;gap:2px;place-items:center;
    }
    @media (prefers-color-scheme: dark){
      .pill{background:rgba(255,255,255,.04)}
    }
    .pill strong{font-weight:700}

    .textarea{
      width:100%;min-height:178px;
      padding:14px 16px;
      background:rgba(255,255,255,.7);
      border:1px solid var(--border);
      border-radius:14px; resize:vertical; outline: none;
      transition: box-shadow .2s ease, border-color .2s ease, transform .2s ease;
      color: whitesmoke;
    }
    @media (prefers-color-scheme: dark){
      .textarea{background:rgba(255,255,255,.04)}
    }
    .textarea:focus{
      border-color:var(--primary);
      box-shadow: 0 0 0 6px var(--ring);
    }

    .row{display:grid;justify-items:center}
    .btn{
      appearance:none; border:none; cursor:pointer;
      background: linear-gradient(180deg, var(--primary), var(--primary-2));
      color:#00323a; font-weight:800; letter-spacing:.2px;
      padding:12px 18px; border-radius:14px;
      box-shadow:var(--shadow);
      transform: translateY(0);
      transition: transform .15s ease, box-shadow .2s ease, filter .2s ease;
    }
    .btn:hover{filter:saturate(1.05) brightness(1.03)}
    .btn:active{transform: translateY(1px); box-shadow: 0 6px 18px rgba(0,0,0,.12)}
    .btn.secondary{
      background: linear-gradient(180deg, #e6f7f9, #d9f4f1);
      color:#0f172a;
    }
    @media (prefers-color-scheme: dark){
      .btn.secondary{background: linear-gradient(180deg, #1a2430, #14202a); color:#e9f2f7}
    }

    .spinner{width:18px;height:18px;border:3px solid rgba(0,0,0,.12);border-top-color:#0a6770;border-radius:50%;display:inline-block;animation:spin .9s linear infinite;margin-left:8px}
    @media (prefers-color-scheme: dark){
      .spinner{border-color:rgba(255,255,255,.28);border-top-color:#7cd4d7}
    }

    /* ========= SCREEN SWITCH (smooth) ========= */
    .screens{display:grid;justify-items:center}
    .screen{width:100%; display:none; opacity:0; transform: translateY(8px);justify-items:center}
    .screen.active{display:block; animation: pageIn .35s ease both}
    .fade-area{animation: fadeIn .35s ease both}

    /* ========= RESULTS ========= */
    .section-title{font-weight:800;font-size:16px;margin:16px 0 8px;text-align:center}
    .split{
      width:min(980px,100%);
      display:grid; gap:14px; align-items:start; justify-items:center;
    }
    @media (min-width:980px){ .split{grid-template-columns: 360px 1fr} }
    .list{
      width:100%;
      display:flex; flex-direction:column; gap:10px;
      max-height:420px; overflow:auto;
    }
    .item{
      text-align:left;
      border:1px solid var(--border);
      background:rgba(255,255,255,.65);
      border-radius:12px; padding:12px 14px; cursor:pointer;
      transition: transform .12s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
    }
    @media (prefers-color-scheme: dark){
      .item{background:rgba(255,255,255,.04)}
    }
    .item:hover{transform: translateY(-1px); box-shadow: var(--shadow-2)}
    .item[aria-selected="true"]{border-color: var(--primary); background: rgba(43,182,198,.12)}
    .meta{color:var(--muted);font-size:13px}
    .viewer{width:100%}
    .embed{width:100%;border:0;border-radius:14px;box-shadow:var(--shadow)}
    .embed.map{aspect-ratio:4/3;min-height:240px}
    .embed.video{aspect-ratio:16/9}

    .tips{display:grid;gap:10px;grid-template-columns:1fr}
    @media (min-width:720px){ .tips{grid-template-columns:repeat(2,1fr)} }
    .tip{
      background:rgba(255,255,255,.65);
      border:1px solid var(--border);
      border-radius:12px;padding:12px 14px;text-align:center;
      transition: box-shadow .2s ease, transform .12s ease;
    }
    @media (prefers-color-scheme: dark){
      .tip{background:rgba(255,255,255,.04)}
    }
    .tip:hover{transform: translateY(-1px); box-shadow: var(--shadow-2)}

    .sr-only{position:absolute!important;clip:rect(1px,1px,1px,1px);padding:0;border:0;height:1px;width:1px;overflow:hidden}

    /* ========= ANIMATIONS ========= */
    @keyframes spin{to{transform: rotate(360deg)}}
    @keyframes fadeIn{from{opacity:0} to{opacity:1}}
    @keyframes pageIn{from{opacity:0; transform:translateY(10px)} to{opacity:1; transform:translateY(0)}}

    @media (prefers-reduced-motion: reduce){
      *{animation: none!important; transition: none!important}
      html{scroll-behavior:auto}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">UAE Moodscape</div>
      <div class="sub">gentle suggestions — not a substitute for therapy</div>
    </header>

    <main class="stack screens">
      <!-- =========================
           Screen 1: Welcome / Input
      ========================== -->
      <section id="screenHome" class="screen active" aria-label="Welcome screen">
        <div class="notice fade-area" role="note" aria-label="Safety notice">
          <h1 style="font-size:20px;margin:0">This site is <em>not</em> a therapist or a crisis line.</h1>
          <p style="margin:0">If you might hurt yourself or someone else, contact emergency services <strong>now</strong>.</p>
          <div class="phones" aria-label="UAE hotlines">
            <div class="pill"><strong>Police</strong><span>999</span></div>
            <div class="pill"><strong>Ambulance</strong><span>998</span></div>
            <div class="pill"><strong>Mental Support Line</strong><span>800-HOPE (8004673)</span></div>
            <div class="pill"><strong>Abu Dhabi “Estijaba”</strong><span>8001717 (psychological support)</span></div>
            <div class="pill"><strong>DFWAC (Women & Children)</strong><span>800111 (24/7)</span></div>
          </div>
          <p class="help">Numbers above are for UAE residents. Educational use only — not medical advice.</p>
        </div>

        <section class="card fade-area" aria-labelledby="agent-title">
          <h2 id="agent-title">Tell the AI what’s going on</h2>
          <label class="sr-only" for="story">Describe what you’d like help with</label>
          <textarea id="story" class="textarea" placeholder="e.g., I’ve been feeling anxious about exams and not sleeping well..."></textarea>

          <div class="row" style="margin-top:12px">
            <button id="analyzeBtn" class="btn">
              Analyze &amp; Suggest
              <span id="spin" class="spinner" style="display:none"></span>
            </button>
          </div>

          <p class="help" id="homeHint">Press Enter to analyze. Shift+Enter makes a new line.</p>
          <p id="homeError" class="help" style="color:#e25840; display:none"></p>
        </section>

        <p class="footnote">Your text goes to your own AI endpoint. Map/Video frames load from Google/YouTube.</p>
      </section>

      <!-- =========================
           Screen 2: Results
      ========================== -->
      <section id="screenResults" class="screen" aria-label="Results screen">
        <div class="stack">
          <div class="row">
            <button id="backBtn" class="btn secondary">← Back</button>
          </div>

          <section id="results" class="card" aria-live="polite" aria-busy="false">
            <h2 id="resultTitle" style="margin-bottom:6px">Suggestions</h2>
            <div id="aiMessage" class="help" style="font-size:15px"></div>

            <div class="section-title">Places you could visit</div>
            <div id="placesSplit" class="split">
              <div id="placesList" class="list" role="listbox" aria-label="Places"></div>
              <div class="viewer">
                <iframe id="mapViewer" class="embed map" loading="lazy" referrerpolicy="no-referrer-when-downgrade" title="Map viewer"></iframe>
              </div>
            </div>

            <div class="section-title">Nature sounds to try</div>
            <div id="soundsSplit" class="split">
              <div id="soundsList" class="list" role="listbox" aria-label="Sounds"></div>
              <div class="viewer">
                <iframe id="videoViewer" class="embed video" loading="lazy" title="Video player"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
              </div>
            </div>

            <div class="section-title">Small steps you can take</div>
            <div id="tips" class="tips"></div>

            <p class="footnote" id="safetyNote" style="margin-top:6px"></p>
          </section>

          <p class="footnote"><strong>Disclaimer:</strong> Not medical advice. If you’re in crisis, call the numbers above.</p>
        </div>
      </section>
    </main>
  </div>

  <script>
    /* ===== Keep your existing data & logic (unchanged) ===== */
    const UAE_PLACES = [
      { name: 'Jubail Mangrove Park', emirate: 'Abu Dhabi', kind: 'nature • boardwalk', moods: ['anxious','stressed','sad','overwhelmed'], maps: 'Jubail+Mangrove+Park' },
      { name: 'Saadiyat Public Beach', emirate: 'Abu Dhabi', kind: 'beach • calm water', moods: ['sad','anxious','tired','overwhelmed'], maps: 'Saadiyat+Public+Beach' },
      { name: 'Umm Al Emarat Park', emirate: 'Abu Dhabi', kind: 'park • shaded paths', moods: ['stressed','anxious','lonely','sad'], maps: 'Umm+Al+Emarat+Park' },
      { name: 'Al Ain Oasis', emirate: 'Al Ain', kind: 'oasis • heritage', moods: ['anxious','overwhelmed','lonely'], maps: 'Al+Ain+Oasis' },
      { name: 'Jebel Jais Viewing Deck', emirate: 'Ras Al Khaimah', kind: 'mountains • scenic', moods: ['frustrated','angry','burned out'], maps: 'Jebel+Jais+Viewing+Deck' },
      { name: 'Hatta Dam', emirate: 'Dubai (Hatta)', kind: 'kayak • turquoise water', moods: ['angry','frustrated','stressed','burned out'], maps: 'Hatta+Dam' },
      { name: 'Al Qudra Lakes', emirate: 'Dubai', kind: 'lakes • cycling track', moods: ['stressed','lonely','burned out'], maps: 'Al+Qudra+Lakes' },
      { name: 'Kite Beach', emirate: 'Dubai', kind: 'promenade • sunset walk', moods: ['sad','tired','anxious','frustrated'], maps: 'Kite+Beach+Dubai' },
      { name: 'Al Fahidi Historical Neighbourhood', emirate: 'Dubai', kind: 'heritage • quiet alleys', moods: ['overwhelmed','anxious','lonely'], maps: 'Al+Fahidi+Historical+Neighbourhood' },
      { name: 'Alserkal Avenue', emirate: 'Dubai', kind: 'arts • cafes', moods: ['lonely','sad','burned out'], maps: 'Alserkal+Avenue' },
      { name: 'Sharjah Beach (Al Khan)', emirate: 'Sharjah', kind: 'beach • gentle waves', moods: ['sad','anxious','tired'], maps: 'Al+Khan+Beach' },
      { name: 'Sharjah Art Museum', emirate: 'Sharjah', kind: 'museum • quiet rooms', moods: ['overwhelmed','anxious','stressed'], maps: 'Sharjah+Art+Museum' }
    ];
    const SOUND_THEMES = [
      { label: 'Ocean waves', moods: ['sad','anxious','tired','overwhelmed'], query: 'ocean+waves+10+hours' },
      { label: 'Light rain', moods: ['sad','anxious','stressed','tired'], query: 'rain+sounds+10+hours' },
      { label: 'Forest ambience', moods: ['anxious','overwhelmed','burned out'], query: 'forest+ambience+birds+relaxing' },
      { label: 'Desert night wind', moods: ['frustrated','angry','burned out'], query: 'desert+wind+ambience+night' },
      { label: 'Creek / gentle water', moods: ['stressed','anxious'], query: 'gentle+stream+water+sounds' },
      { label: 'Brown noise (softer than white)', moods: ['anxious','tired','overwhelmed'], query: 'brown+noise+sleep+focus' }
    ];
    const GENERIC_TIPS = [
      { text: 'Box breathing 4-4-4-4 for 3 minutes.' },
      { text: 'Step outside for 10 minutes of daylight or a short walk.' },
      { text: 'Drink water and have a small snack if you haven’t eaten recently.' },
      { text: 'Text or call someone you trust and tell them how you’re feeling.' },
      { text: 'Write down one worry and one small action you can take today.' }
    ];

    /* ===== Elements ===== */
    const screenHome   = document.getElementById('screenHome');
    const screenResults= document.getElementById('screenResults');
    const analyzeBtn   = document.getElementById('analyzeBtn');
    const backBtn      = document.getElementById('backBtn');
    const storyEl      = document.getElementById('story');
    const spinEl       = document.getElementById('spin');
    const homeError    = document.getElementById('homeError');
    const aiMsgEl      = document.getElementById('aiMessage');
    const placesList   = document.getElementById('placesList');
    const mapViewer    = document.getElementById('mapViewer');
    const soundsList   = document.getElementById('soundsList');
    const videoViewer  = document.getElementById('videoViewer');
    const tipsEl       = document.getElementById('tips');
    const safetyNote   = document.getElementById('safetyNote');
    const titleEl      = document.getElementById('resultTitle');

    // Submit on Enter (Shift+Enter = newline)
    storyEl.addEventListener('keydown',(e)=>{
      if(e.key==='Enter' && !e.shiftKey){ e.preventDefault(); analyzeBtn.click(); }
    });

    backBtn.addEventListener('click', ()=>{
      switchScreen('home');
      homeError.style.display='none';
      homeError.textContent='';
      storyEl.focus({preventScroll:true});
    });

    function switchScreen(which){
      if(which==='results'){
        screenHome.classList.remove('active');
        screenResults.classList.add('active');
      }else{
        screenResults.classList.remove('active');
        screenHome.classList.add('active');
      }
      window.scrollTo({top:0,behavior:'smooth'});
    }

    // Analyze flow (kept same behavior)
    analyzeBtn.addEventListener('click', async ()=>{
      const story = (storyEl.value || '').trim();
      homeError.style.display='none';
      homeError.textContent='';

      if(!story){
        homeError.textContent = 'Please write a few lines so I can tailor suggestions.';
        homeError.style.display='block';
        storyEl.focus();
        return;
      }
      analyzeBtn.disabled = true;
      spinEl.style.display = 'inline-block';

      try{
        const result = await analyzeViaServer([], story);
        const noLists = (!result.places?.length && !result.sounds?.length && !result.tips?.length);
        if(noLists){
          homeError.innerHTML = result.aiText || 'I’m not sure I understood. Could you rephrase what you’re feeling?';
          homeError.style.display='block';
          return;
        }
        renderResult(result);
        switchScreen('results');
      }catch(err){
        console.error(err);
        homeError.textContent = 'Could not reach the AI service. Please check your API key or try again.';
        homeError.style.display='block';
      }finally{
        spinEl.style.display='none';
        analyzeBtn.disabled=false;
      }
    });

    // Same server hook as before
    async function analyzeViaServer(moods, story){
      const res = await fetch("/api/ai", {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({ moods, story })
      });

      let data = {};
      try{ data = await res.json(); }catch(_){}

      if(!res.ok){
        console.error("API error:", res.status, data);
        throw new Error(data?.detail || data?.error || `AI HTTP ${res.status}`);
      }

      const inferred = (data.inferredMoods || []).map(s => s.toLowerCase());
      const isUnclear = inferred.length===1 && inferred[0]==="unclear";
      if(isUnclear){
        return { aiText: data.aiText || "I’m not sure I understood. Could you rephrase what you’re feeling?", places:[], sounds:[], tips:[] };
      }

      const heuristic = analyzeLocally(inferred, story);
      return { aiText: data.aiText || heuristic.aiText, places: heuristic.places, sounds: heuristic.sounds, tips: heuristic.tips };
    }

    function analyzeLocally(moods, story){
      const text = (story || '').toLowerCase();
      const kw = {
        sleep: /(sleep|insomnia|tired|fatigue)/.test(text),
        study: /(exam|school|study|assignment|university|test)/.test(text),
        work:  /(work|boss|job|deadline|burnout|burned\s*out)/.test(text),
        social: /(lonely|alone|friends?|breakup|relationship)/.test(text),
        anger: /(angry|mad|furious|irritated|frustrated)/.test(text),
        anxiety: /(anxiety|anxious|panic|worry|worried|nervous)/.test(text),
      };

      if(!moods?.length){
        if(kw.anxiety) moods.push('anxious');
        if(kw.anger) moods.push('angry');
        if(kw.social) moods.push('lonely');
        if(kw.sleep) moods.push('tired');
        if(!moods.length) moods = ['stressed'];
      }

      const placeScores = UAE_PLACES.map(p => ({
        place:p, score:p.moods.reduce((s,m)=> s + (moods.includes(m)?1:0), 0)
      })).sort((a,b)=> b.score - a.score || a.place.name.localeCompare(b.place.name));
      const topPlaces = placeScores.filter(x=>x.score>0).slice(0,6).map(x=>x.place);
      const fallbackPlaces = UAE_PLACES.slice(0,6);

      const topSounds = SOUND_THEMES.filter(s => s.moods.some(m => moods.includes(m))).slice(0,6);

      const tips = [...GENERIC_TIPS];
      if(kw.sleep) tips.unshift({ text: 'Try a 60–90 min wind-down (dim lights, stretch, no heavy screens).' });
      if(kw.study) tips.unshift({ text: 'Do a 25-minute focus block near daylight, then 5-minute walk.' });
      if(kw.work)  tips.unshift({ text: 'Take a 15-minute reset break between meetings to step outside.' });
      if(kw.social)tips.unshift({ text: 'Message one person today to meet for a short walk or coffee.' });
      if(kw.anger) tips.unshift({ text: 'Do 3 rounds of brisk walking or light stairs to release tension.' });

      const moodLine = moods.length
        ? `I’m hearing themes like ${moods.map(m=>`<strong>${m}</strong>`).join(', ')}.`
        : 'Thanks for sharing — I’ll keep suggestions gentle and flexible.';
      const note = `This isn’t therapy. If you feel unsafe or in crisis, please call <strong>999</strong> (police) or <strong>998</strong> (ambulance). For mental support you can call <strong>800-HOPE (8004673)</strong>, Abu Dhabi’s <strong>Estijaba 8001717</strong>, or <strong>DFWAC 800111</strong>.`;
      const aiText = `${moodLine} Based on that, here are calm places, sounds, and small steps that often help in the UAE. ${note}`;

      return {
        aiText,
        places: topPlaces.length ? topPlaces : fallbackPlaces,
        sounds: topSounds.length ? topSounds : SOUND_THEMES.slice(0,4),
        tips: tips.slice(0,6)
      };
    }

    function renderResult({ aiText, places, sounds, tips }){
      aiMsgEl.innerHTML = aiText;

      // Places
      placesList.innerHTML=''; mapViewer.removeAttribute('src');
      let firstPlaceURL='';
      places.forEach((p,idx)=>{
        const item=document.createElement('button');
        item.className='item'; item.setAttribute('role','option'); item.setAttribute('aria-selected','false');
        item.innerHTML = `<div style="color: white; weight: bold;"><strong>${p.name}</strong></div><div class="meta">${p.emirate} • ${p.kind}</div>`;
        const q=(p.maps || p.name).replace(/\+/g,' ');
        const url=`https://www.google.com/maps?q=${encodeURIComponent(q)}&output=embed`;
        if(idx===0) firstPlaceURL=url;
        item.addEventListener('click',()=>{
          document.querySelectorAll('#placesList .item').forEach(el=>el.setAttribute('aria-selected','false'));
          item.setAttribute('aria-selected','true'); mapViewer.src=url;
        });
        placesList.appendChild(item);
      });
      const firstPlace=placesList.querySelector('.item');
      if(firstPlace){ firstPlace.click(); } else if(firstPlaceURL){ mapViewer.src=firstPlaceURL; }

      // Sounds
      soundsList.innerHTML=''; videoViewer.removeAttribute('src');
      let firstVideoURL='';
      sounds.forEach((s,idx)=>{
        const item=document.createElement('button');
        item.className='item'; item.setAttribute('role','option'); item.setAttribute('aria-selected','false');
        item.innerHTML = `<div><strong>${s.label}</strong></div><div class="meta">First YouTube result</div>`;
        const q=s.query.replace(/\+/g,' ');
        const url=`https://www.youtube-nocookie.com/embed?listType=search&list=${encodeURIComponent(q)}&rel=0&modestbranding=1`;
        if(idx===0) firstVideoURL=url;
        item.addEventListener('click',()=>{
          document.querySelectorAll('#soundsList .item').forEach(el=>el.setAttribute('aria-selected','false'));
          item.setAttribute('aria-selected','true'); videoViewer.src=url;
        });
        soundsList.appendChild(item);
      });
      const firstSound=soundsList.querySelector('.item');
      if(firstSound){ firstSound.click(); } else if(firstVideoURL){ videoViewer.src=firstVideoURL; }

      // Tips
      tipsEl.innerHTML='';
      tips.forEach(t=>{
        const el=document.createElement('div');
        el.className='tip'; el.textContent=t.text; tipsEl.appendChild(el);
      });

      titleEl.textContent='Suggestions';
      safetyNote.innerHTML=`Remember: this tool can’t diagnose or treat. If symptoms persist, consider speaking with a licensed professional in the UAE.`;
    }
  </script>
</body>
</html>
